<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Caissa School of Chess – Batch Battle Leaderboard</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --cream-bg: #FBF7ED;
  --off-white: #FFF6E3;
  --light-sand: #F4E7C3;
  --warm-gold: #E5B84B;
  --burnt-orange: #E07A3F;
  --dark-brown: #3A2F2A;
  --light-brown: #9A8F86;
}

body {
  margin:0;
  font-family:'Montserrat', sans-serif;
  background:var(--cream-bg);
  color:var(--dark-brown);
}

/* TOP HEADER */
.topbar {
  background: white;   /* changed from light-sand */
  padding:12px 24px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid #eee;  /* softer divider */
}
.live-box {
  display:flex;
  align-items:center;
  gap:6px;
  font-weight:600;
  color:var(--burnt-orange);
  border:1px solid var(--burnt-orange);
  padding:4px 10px;
  border-radius:6px;
  font-size:12px;
}

.live-dot {
  width:8px;
  height:8px;
  background:var(--burnt-orange);
  border-radius:50%;
  animation:pulse 2s infinite;
}

@keyframes pulse {
  0% {opacity:1;}
  50% {opacity:0.4;}
  100% {opacity:1;}
}

/* BANNER */
.banner img {
  width:100%;
  height:200px;
  object-fit:cover;
  display:block;
}

/* MAIN */
main {
  max-width:1200px;
  margin:40px auto;
  padding:0 24px;
}

/* QUOTE */
.quote {
  background:var(--light-sand);
  padding:18px;
  border-radius:12px;
  text-align:center;
  font-style:italic;
  margin-bottom:40px;
}

/* TWO COLUMN */
.container {
  display:flex;
  gap:40px;
  flex-wrap:wrap;
}

.card {
  flex:1;
  min-width:320px;
  padding:24px;
  border-radius:12px;
}

.rules {
  background:var(--light-sand);
}

.leaderboard-card {
  background:var(--off-white);
}

.rules ul {
  line-height:1.8;
  padding-left:20px;
}

/* LEADERBOARD ROW */
.row {
  display:flex;
  align-items:center;
  padding:12px;
  border-radius:8px;
  margin-bottom:10px;
  background:white;
  transition:0.2s;
}

.row:hover {
  background:var(--light-sand);
}

.rank {
  width:40px;
  height:40px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:600;
  margin-right:14px;
  background:var(--warm-gold);
  color:white;
}

.rank-1 { background:gold; }
.rank-2 { background:silver; }
.rank-3 { background:#cd7f32; }

.batch-name {
  font-weight:500;
}

.score {
  margin-left:auto;
  font-weight:600;
  color:var(--burnt-orange);
}

/* UPLOAD BUTTON */
.upload-btn {
  position:fixed;
  bottom:24px;
  right:24px;
  width:60px;
  height:60px;
  border-radius:50%;
  background:linear-gradient(135deg,var(--burnt-orange),#d86a35);
  color:white;
  font-size:24px;
  border:none;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,0.25);
}

input[type="file"] {
  display:none;
}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <img src="circlechesslogo.jpg" style="height:40px;">
  <div class="live-box">
    <div class="live-dot"></div>
    LIVE
  </div>
</div>

<!-- BANNER -->
<div class="banner">
  <img src="csocbanner.jpg">
</div>

<main>

  <!-- QUOTE -->
  <div class="quote">
    “Every game is a lesson.”
  </div>

  <div class="container">

    <!-- LEFT RULES -->
    <div class="card rules">
      <h2>Tournament Rules</h2>
      <ul>
        <li>5 Rounds – 10+5 Time Format Swiss Tournament.</li>
        <li>Players score individually; points contribute to their batch.</li>
        <li>The batch with the highest total points wins.</li>
        <li>The top contributor becomes the MVP.</li>
        <li>Intermediate & Advanced Masterclass: Only MVPs declared.</li>
        <li>MVP Rewards: Certificate signed by GM Vishnu Prasanna, Social Media Feature, 1:1 Special Mentor Session.</li>
      </ul>
    </div>

    <!-- RIGHT LEADERBOARD -->
    <div class="card leaderboard-card">
      <h2>Leaderboard</h2>
      <div id="leaderboard"></div>
    </div>

  </div>
</main>

<input type="file" id="csvInput" accept=".csv">
<button class="upload-btn" onclick="csvInput.click()">⬆</button>

<script>
const csvInput = document.getElementById("csvInput");
const leaderboard = document.getElementById("leaderboard");

csvInput.addEventListener("change", function () {
  const file = this.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function (e) {
    const lines = e.target.result.trim().split("\n");
    lines.shift(); // remove header

    const data = [];

    lines.forEach(line => {
      const parts = line.split(",");
      if (parts.length < 2) return;

      const batch = parts[0].trim();
      const points = parseFloat(parts[1]);

      if (!batch || isNaN(points)) return;
      data.push({ batch, points });
    });

    data.sort((a,b)=>b.points-a.points);
    render(data);
  };

  reader.readAsText(file);
});

function render(data){
  leaderboard.innerHTML="";

  data.forEach((item,index)=>{
    const rank=index+1;
    let rankClass="";
    if(rank===1) rankClass="rank-1";
    else if(rank===2) rankClass="rank-2";
    else if(rank===3) rankClass="rank-3";

    leaderboard.innerHTML+=`
      <div class="row">
        <div class="rank ${rankClass}">${rank}</div>
        <div class="batch-name">${item.batch}</div>
        <div class="score">${item.points}</div>
      </div>
    `;
  });
}
</script>

</body>
</html>

