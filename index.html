<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Caissa School of Chess – Leaderboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --cream-bg: #FBF7ED;
      --off-white: #FFF6E3;
      --light-sand: #F4E7C3;
      --warm-gold: #E5B84B;
      --burnt-orange: #E07A3F;
      --dark-brown: #3A2F2A;
      --light-brown: #9A8F86;
    }

    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: var(--cream-bg);
      color: var(--dark-brown);
    }

    /* HEADER */
    header {
      background: var(--off-white);
      border-bottom: 2px solid var(--warm-gold);
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* FULL WIDTH BANNER */
.banner {
  width: 100%;
  padding: 0;
  margin: 0;
}

.banner img {
  width: 100%;
  height: 200px;
  display: block;
}


    .branding h1 {
      margin: 0;
      font-size: 1.4rem;
      font-weight: 600;
    }

    .branding p {
      margin: 2px 0 0;
      font-size: 0.75rem;
      color: var(--light-brown);
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }

    .live {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--burnt-orange);
      border: 1px solid var(--burnt-orange);
      padding: 4px 8px;
      border-radius: 6px;
    }

    .dot {
      width: 8px;
      height: 8px;
      background: var(--burnt-orange);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.4; }
      100% { opacity: 1; }
    }

    /* MAIN */
    main {
      max-width: 900px;
      margin: auto;
      padding: 24px;
    }

    .row {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      border-radius: 8px;
      transition: 0.2s;
    }

    .row:hover {
      background: var(--light-sand);
    }

    .rank {
      width: 54px;
      height: 54px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin-right: 16px;
      background: linear-gradient(135deg, var(--warm-gold), #d4a23f);
    }

    .rank-1 { background: linear-gradient(135deg, #FFD700, #FFC700); }
    .rank-2 { background: linear-gradient(135deg, #C9CDD3, #B8BFC8); }
    .rank-3 { background: linear-gradient(135deg, #C18A4A, #B07540); }

    .batch-name {
      font-size: 1rem;
      font-weight: 500;
    }

    .position {
      font-size: 0.75rem;
      color: var(--light-brown);
    }

    .score {
      margin-left: auto;
      text-align: right;
    }

    .score-value {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--burnt-orange);
    }

    .score-label {
      font-size: 0.7rem;
      color: var(--light-brown);
      text-transform: uppercase;
    }

    /* UPLOAD */
    .upload-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--burnt-orange), #d86a35);
      color: #fff;
      font-size: 1.5rem;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    }

    .upload-btn:hover {
      transform: scale(1.05);
    }

    input[type="file"] {
      display: none;
    }
  </style>
</head>

<body>

<header class="banner">
  <img src="csocbanner.jpg" alt="Caissa School of Chess Banner">
</header>



</header>

<main id="leaderboard"></main>

<input type="file" id="csvInput" accept=".csv">
<button class="upload-btn" onclick="csvInput.click()">⬆️</button>

<script>
  const csvInput = document.getElementById("csvInput");
  const leaderboard = document.getElementById("leaderboard");

  csvInput.addEventListener("change", function () {
    const file = this.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function (e) {
      const lines = e.target.result
        .trim()
        .split("\n");

      // ✅ REMOVE HEADER ROW
      lines.shift();

      const data = [];

      lines.forEach(line => {
        const parts = line.split(",");
        if (parts.length < 2) return;

        const className = parts[0].trim();
        const points = parseFloat(parts[1]);

        if (!className || isNaN(points)) return;

        data.push({ className, points });
      });

      data.sort((a, b) => b.points - a.points);
      render(data);
    };

    reader.readAsText(file);
  });

  function render(data) {
    leaderboard.innerHTML = "";

    data.forEach((item, index) => {
      const rank = index + 1;
      let rankClass = "";
      if (rank === 1) rankClass = "rank-1";
      else if (rank === 2) rankClass = "rank-2";
      else if (rank === 3) rankClass = "rank-3";

      leaderboard.innerHTML += `
        <div class="row">
          <div class="rank ${rankClass}">${rank}</div>
          <div>
            <div class="batch-name">${item.className}</div>
            <div class="position">#${rank} Position</div>
          </div>
          <div class="score">
            <div class="score-value">${item.points.toFixed(1)}</div>
            <div class="score-label">Points</div>
          </div>
        </div>
      `;
    });
  }
</script>

</body>
</html>
